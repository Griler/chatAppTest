{"version":3,"sources":["../../../../../assets/Script/ChatForm/assets/Script/ChatForm/ChatRoomSocket.js"],"names":["io","require","cc","Class","extends","Component","properties","avatar","Sprite","nameUser","Label","atlasImg","SpriteAtlas","onLoad","socket","on","log","e","userData","JSON","parse","message","setAvatarName","name","imgName","start","x","getSpriteFrames","spriteFrame","string"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAMA,KAAKC,QAAQ,kBAAR,CAAX;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAOL,GAAGM,MADF;AAERC,kBAASP,GAAGQ,KAFJ;AAGRC,kBAAST,GAAGU;AAHJ,KAHP;;AASL;;AAEAC,UAXK,oBAWI;AAAA;;AACL;AACA,aAAKC,MAAL,GAAcd,GAAG,uBAAH,CAAd;AACA;AACA,aAAKc,MAAL,CAAYC,EAAZ,CAAe,SAAf,EAA0B,YAAM;AAC5Bb,eAAGc,GAAH,CAAO,qBAAP;AACH,SAFD;AAGA,aAAKF,MAAL,CAAYC,EAAZ,CAAe,UAAf,EAA2B,UAACE,CAAD,EAAO;AAC9B,kBAAKC,QAAL,GAAgBC,KAAKC,KAAL,CAAWH,EAAEI,OAAb,CAAhB;AACAnB,eAAGc,GAAH,CAAO,MAAKE,QAAZ;AACA,kBAAKI,aAAL,CAAmB,MAAKJ,QAAL,CAAcK,IAAjC,EAAsC,MAAKL,QAAL,CAAcM,OAApD;AACH,SAJD;AAKH,KAvBI;AAwBLC,SAxBK,mBAwBI,CACR,CAzBI;;AA0BLH,mBAAc,uBAAUb,QAAV,EAAmBe,OAAnB,EAA4B;AACtC;AACA,aAAK,IAAIE,CAAT,IAAc,KAAKf,QAAL,CAAcgB,eAAd,EAAd,EAA+C;AAC3C,gBAAI,KAAKhB,QAAL,CAAcgB,eAAd,GAAgCD,CAAhC,EAAmCH,IAAnC,KAA4CC,OAAhD,EAAyD;AACrD,qBAAKjB,MAAL,CAAYqB,WAAZ,GAA0B,KAAKjB,QAAL,CAAcgB,eAAd,GAAgCD,CAAhC,CAA1B;AACH;AACJ;AACD,aAAKjB,QAAL,CAAcoB,MAAd,GAAuBpB,QAAvB;AACH;AAlCI,CAAT","file":"ChatRoomSocket.js","sourceRoot":"../../../../../assets/Script/ChatForm","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\nconst io = require('socket.io-client');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        avatar:cc.Sprite,\n        nameUser:cc.Label,\n        atlasImg:cc.SpriteAtlas\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        //Kết nối với máy chủ Socket.IO\n        this.socket = io('http://localhost:4000');\n        // Bắt sự kiện khi kết nối thành công\n        this.socket.on('connect', () => {\n            cc.log('Connected to server');\n        });\n        this.socket.on('userData', (e) => {\n            this.userData = JSON.parse(e.message);\n            cc.log(this.userData);\n            this.setAvatarName(this.userData.name,this.userData.imgName)\n        });\n    },\n    start () {\n    },\n    setAvatarName:function (nameUser,imgName) {\n        //cc.log(this.avatar.imageAtlas);\n        for (let x in this.atlasImg.getSpriteFrames()) {\n            if (this.atlasImg.getSpriteFrames()[x].name === imgName) {\n                this.avatar.spriteFrame = this.atlasImg.getSpriteFrames()[x];\n            }\n        }\n        this.nameUser.string = nameUser;\n    }\n});\n"]}